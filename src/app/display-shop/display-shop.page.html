<ion-header *ngIf="!createcollection">

  <ion-toolbar color="success">

    <div *ngIf="shopData" style="width: 100%;" class="header">
      <ion-icon (click)="closePage()" class="iconheight" name="chevron-back"></ion-icon>
      <ion-label class="toggledfont" style="position: relative;top: 4px;color: white;font-weight: bold;">DISPLAY SHOP
      </ion-label>


      <ion-icon *ngIf="userID == shopData.Df.sn.proto.mapValue.fields.OwnerID.stringValue && !list && shopData"
        (click)="showHidelist()" class="iconheight" name="caret-down"></ion-icon>


      <ion-icon *ngIf="userID == shopData.Df.sn.proto.mapValue.fields.OwnerID.stringValue && list  && shopData"
        (click)="showHidelist()" class="iconheight" name="caret-up"></ion-icon>


      <ion-icon *ngIf="userID != shopData.Df.sn.proto.mapValue.fields.OwnerID.stringValue && !list &&shopData">
      </ion-icon>

    </div>
  </ion-toolbar>

  <div *ngIf="list">

    <div class="toggled-list">

      <ion-item>
        <ion-label (click)="editProfile()" class="toggledfont">Edit Page</ion-label>
      </ion-item>

      <ion-item>
        <ion-label (click)="createnewcollection()" class="toggledfont">Create Collection</ion-label>
      </ion-item>

      <ion-item>
        <ion-label (click)="deleteshop()" class="toggledfont">Delete Page</ion-label>
      </ion-item>
    </div>

  </div>

</ion-header>

<ion-content>


  <!--main page-->
  <div *ngIf="!createcollection">

    <div class='topimg'>
      <img src="../../assets/pexels-photo-947914.jpeg" alt="">

    </div>

    <div *ngIf="shopData" class='card-parent'>

      <div style="position: relative;top: -5em;" class="card">

        <div *ngIf="shopData && !editPage" class="imgcentre">

          <ion-avatar style="height: 10em;width: 10em;object-fit: contain;">
            <img class="border imgheightWidth" src="{{shopData.Df.sn.proto.mapValue.fields.ProfileImage.stringValue}}"
              alt="">
          </ion-avatar>



        </div>

        <div *ngIf="!editPage" style="position: relative;top: -4em;" class="textCentre">

          <div style="position: relative;top: -6px;" class="name">
            {{shopData.Df.sn.proto.mapValue.fields.Name.stringValue}}
          </div>

          <div style="margin-top: 6px;">

            <ion-label style="color: rgba(0, 128, 0, 0.904);" class="txt">
              {{shopData.Df.sn.proto.mapValue.fields.Description.stringValue}}
            </ion-label>
          </div>

          <div style="margin-top: 6px;" class="txt" lines="none">
            <b>
              Contact Mail:
            </b> {{shopData.Df.sn.proto.mapValue.fields.Email.stringValue}}
          </div>


          <div style="margin-top: 6px;" class="txt" lines="none">
            <b>
              Registered Since:
            </b> {{timeCalc(shopData.Df.sn.proto.mapValue.fields.RegisteredAt.integerValue)}}
          </div>

          <div style="margin-top: 6px;" class="txt" lines="none">
            <b>
              Adress:
            </b> {{shopData.Df.sn.proto.mapValue.fields.Adress.stringValue}}
          </div>



          <!-- <div *ngIf="editPage">

            <ion-list class="line-input">

              <ion-item>
                <ion-label>NAME</ion-label>
                <ion-input placeholder="Enter Name"></ion-input>
              </ion-item>

            </ion-list>

          </div> -->

        </div>

        <div *ngIf="editPage" class="txt" class="otherDetails">



          <ion-list style="margin-top: 4px;" *ngIf="editPage" class="line-input">

            <ion-item>
              <ion-label>email</ion-label>
              <ion-input placeholder="Enter email"></ion-input>
            </ion-item>

          </ion-list>



          <ion-button *ngIf="editPage" expand="block" color="success">FETCH ADRESS</ion-button>

          <ion-list *ngIf="editPage" class="line-input">
            <ion-item>
              <ion-label>Description</ion-label>
              <ion-input placeholder="Enter description"></ion-input>
            </ion-item>
          </ion-list>

        </div>

        <div>

          <ion-button *ngIf="editPage" shape="round" color="success">SAVE</ion-button>

          <ion-button (click)="editProfile()" *ngIf="editPage" shape="round" fill="outline" color="danger">CANCEL
          </ion-button>
        </div>

      </div>

    </div>

    <div *ngIf="collections">
      <div class="moveUp" *ngFor="let ite of collections">

        <div>
          <ion-item color="none" lines="none">
            <ion-label class="greenColor">{{ite.collectionName}}</ion-label>
          </ion-item>

        </div>

        <div style=" width: auto;
        display: flex;
        flex-wrap: wrap;
        padding: 0px;">

          <div *ngFor="let item of ite.images" style=" width: 50%;border-radius: 16px;
          box-shadow: -1rem 0 3rem transparent;
          display: flex;
          flex-direction: column;
          padding: 4px;
          transition: 0.2s;">
            <img style=" object-position: 50% 50%;
            border-radius: 10px;
            object-fit: cover;
            height: 100px;
            width: 400px;" src="{{item.clickedImage}}" alt="">
          </div>
        </div>
      </div>
    </div>

  </div>

  <!--Create collection-->
  <div *ngIf="createcollection">
    <img src="../../assets/checklogo.png" class="topleftimage" alt="">
    <ion-label class="alignleft">TERRAPLANTERA</ion-label>

    <div class="fadeInRight" *ngIf="stage=='name'" class="middle">

      <ion-label class="lordrinafont">CHOOSE A NAME FOR COLLECTION</ion-label>

      <ion-list class="line-input padding">

        <ion-item>

          <ion-input class="k2dfont" [(ngModel)]="collectionName" placeholder="Example:ROSES,SUNFLOWERS"></ion-input>

        </ion-item>

      </ion-list>

      <div class="padding">
        <ion-button (click)="collectionstages('uploadphotos')" mode='ios' expand='block' color="dark">NEXT
          <ion-icon name="arrow-forward"></ion-icon>
        </ion-button>
        <ion-button (click)="createnewcollection()" fill='clear' mode='ios' expand='block' color="danger">
          NOT NOW
          <ion-icon slot="start" name="close-outline"></ion-icon>
        </ion-button>
      </div>

    </div>

    <div *ngIf="stage=='uploadphotos'">
      <div style="text-align: center;">
        <ion-button (click)="deleteCollection()" fill='clear' mode='ios' expand='block' color="danger">
          Cancel
          <ion-icon slot="start" name="arrow-back"></ion-icon>
        </ion-button>
      </div>
      <div class="fadeInRight" class="midle">
        <ion-label class="lordrinafont">ADD IMAGES TO COLLECTIONS</ion-label>

        <div class="cardscontainer">
          <ion-grid>
            <ion-row>

              <ion-col (click)="ChoosePhotoOption()" *ngFor="let item of [].constructor(12)">

                <div *ngIf="!shopImages" class="imgcards">

                  <img class="upimgicon" src="../../assets/uploadimage.png" alt="">

                </div>

              </ion-col>

              <div *ngIf="shopImages">

                <ion-col style="display: flex;flex-wrap: wrap;" *ngFor="let item of shopImages.images">
                  <div>

                    <div>
                      <img style="height:5em;width: 100%;object-fit: contain;" src="{{item.clickedImage}}" alt="">
                      <ion-chip color="none" style="background: rgb(241, 238, 238);">
                        <ion-icon (click)="removeimage(item.clickedImage)" size="large" style="position: relative;"
                          color="danger" name='trash'></ion-icon><span
                          style="font-family: monospace; color:red;font-weight: bold;">Delete</span>
                      </ion-chip>
                    </div>
                  </div>
                </ion-col>

              </div>

            </ion-row>
          </ion-grid>

        </div>

        <div class="btnnext">
          <ion-button (click)="ChoosePhotoOption()" *ngIf="shopImages" fill='clear' color="success">UPLOAD MORE
            <ion-icon color="success" slot="start" name="add-outline"></ion-icon>
          </ion-button>

          <ion-button (click)="create()" mode='ios' expand='block' color="dark">DONE
            <ion-icon name="arrow-forward"></ion-icon>
          </ion-button>
        </div>


      </div>
    </div>


  </div>

</ion-content>